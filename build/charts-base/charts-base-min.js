YUI.add("charts-base",function(C,e){var t=C.config,l=t.win,g=t.doc,k=C.Lang,i=k.isString,r=C.ClassNameManager.getClassName,d=r("seriesmarker");function s(){}C.Gridlines=C.Base.create("gridlines",C.Base,[C.Renderer],{_path:null,remove:function(){var e=this._path;e&&e.destroy()},draw:function(){this.get("axis")&&this.get("graph")&&this._drawGridlines()},_drawGridlines:function(){var e,t,i,s,r,n=this.get("axis"),a=n.get("position"),o=0,h=this.get("direction"),l=this.get("graph"),g=l.get("width"),d=l.get("height"),c=this.get("styles").line,u=c.color,p=c.weight,c=c.alpha,y=this.get("count");if(isFinite(g)&&isFinite(d)&&0<g&&0<d){for(i=(t=y&&C.Lang.isNumber(y)?this._getPoints(y,g,d):"none"!==a&&n&&n.get("tickPoints")?n.get("tickPoints"):this._getPoints(n.get("styles").majorUnit.count,g,d)).length,(e=l.get("gridlines")).set("width",g),e.set("height",d),e.set("stroke",{weight:p,color:u,opacity:c}),s="vertical"===h?(r=this._verticalLine,d):(r=this._horizontalLine,g),o=0;o<i;o+=1)r(e,t[o],s);e.end()}},_getPoints:function(e,t,i){for(var s,r=[],n=e-1,a=0;a<e;a+=1)r[a]={x:t*(s=a/n),y:i*s};return r},_horizontalLine:function(e,t,i){e.moveTo(0,t.y),e.lineTo(i,t.y)},_verticalLine:function(e,t,i){e.moveTo(t.x,0),e.lineTo(t.x,i)},_getDefaultStyles:function(){return{line:{color:"#f0efe9",weight:1,alpha:1}}}},{ATTRS:{direction:{},axis:{},graph:{},count:{}}}),C.Graph=C.Base.create("graph",C.Widget,[C.Renderer],{bindUI:function(){this.get("boundingBox").setStyle("position","absolute"),this.after("widthChange",this._sizeChangeHandler),this.after("heightChange",this._sizeChangeHandler),this.after("stylesChange",this._updateStyles),this.after("groupMarkersChange",this._drawSeries)},syncUI:function(){var e,t,i,s=this.get("seriesCollection"),r=0,n=s?s.length:0,a=this.get("horizontalGridlines"),o=this.get("verticalGridlines");for(this.get("showBackground")&&(e=this.get("background"),this.get("contentBox"),(t=this.get("styles").background).stroke=t.border,t.stroke.opacity=t.stroke.alpha,t.fill.opacity=t.fill.alpha,t.width=this.get("width"),t.height=this.get("height"),t.type=t.shape,e.set(t));r<n;++r)(i=s[r])instanceof C.SeriesBase&&i.render();a&&a instanceof C.Gridlines&&a.draw(),o&&o instanceof C.Gridlines&&o.draw()},seriesTypes:null,getSeriesByIndex:function(e){var t,i=this.get("seriesCollection");return t=i&&i.length>e?i[e]:t},getSeriesByKey:function(e){var t,i=this._seriesDictionary;return t=i&&i.hasOwnProperty(e)?i[e]:t},addDispatcher:function(e){this._dispatchers||(this._dispatchers=[]),this._dispatchers.push(e)},_seriesCollection:null,_seriesDictionary:null,_parseSeriesCollection:function(e){if(e){var t,i,s=e.length,r=0;for(this._seriesCollection=[],this._seriesDictionary={},this.seriesTypes=[];r<s;++r)(t=e[r])instanceof C.CartesianSeries||t instanceof C.PieSeries?this._addSeries(t):this._createSeries(t);for(s=this._seriesCollection.length,r=0;r<s;++r)i="horizontal"===(t=this.get("seriesCollection")[r]).get("direction")?"yKey":"xKey",this._seriesDictionary[t.get(i)]=t}},_addSeries:function(e){var t=e.get("type"),i=this.get("seriesCollection"),s=i.length,r=this.seriesTypes;e.get("graph")||e.set("graph",this),i.push(e),r.hasOwnProperty(t)||(this.seriesTypes[t]=[]),i=this.seriesTypes[t],e.set("graphOrder",s),e.set("order",i.length),i.push(e),e.set("seriesTypeCollection",i),this.addDispatcher(e),e.after("drawingComplete",C.bind(this._drawingCompleteHandler,this)),this.fire("seriesAdded",e)},_createSeries:function(e){var t=e.type,i=this.get("seriesCollection"),s=this.seriesTypes;e.graph=this,s.hasOwnProperty(t)||(s[t]=[]),t=s[t],e.graph=this,e.order=t.length,e.graphOrder=i.length,s=new(this._getSeries(e.type))(e),this.addDispatcher(s),s.after("drawingComplete",C.bind(this._drawingCompleteHandler,this)),t.push(s),i.push(s),s.set("seriesTypeCollection",t),this.get("rendered")&&s.render()},_seriesMap:{line:C.LineSeries,column:C.ColumnSeries,bar:C.BarSeries,area:C.AreaSeries,candlestick:C.CandlestickSeries,ohlc:C.OHLCSeries,stackedarea:C.StackedAreaSeries,stackedline:C.StackedLineSeries,stackedcolumn:C.StackedColumnSeries,stackedbar:C.StackedBarSeries,markerseries:C.MarkerSeries,spline:C.SplineSeries,areaspline:C.AreaSplineSeries,stackedspline:C.StackedSplineSeries,stackedareaspline:C.StackedAreaSplineSeries,stackedmarkerseries:C.StackedMarkerSeries,pie:C.PieSeries,combo:C.ComboSeries,stackedcombo:C.StackedComboSeries,combospline:C.ComboSplineSeries,stackedcombospline:C.StackedComboSplineSeries},_getSeries:function(e){e=k.isString(e)?this._seriesMap[e]:e;return e},_markerEventHandler:function(e){var t=e.type,e=e.currentTarget.getAttribute("id").split("_"),i=this.getSeriesByIndex(e[1]),e=e[2];i.updateMarkerState(t,e)},_dispatchers:null,_updateStyles:function(){var e=this.get("styles").background,t=e.border;t.opacity=t.alpha,e.stroke=t,e.fill.opacity=e.fill.alpha,this.get("background").set(e),this._sizeChangeHandler()},_sizeChangeHandler:function(){var e=this.get("horizontalGridlines"),t=this.get("verticalGridlines"),i=this.get("width"),s=this.get("height"),r=this.get("styles").background;r&&r.border&&r.border.weight,this.get("showBackground")&&(r=this.get("background"),i&&s&&(r.set("width",i),r.set("height",s))),this._gridlines&&this._gridlines.clear(),e&&e instanceof C.Gridlines&&e.draw(),t&&t instanceof C.Gridlines&&t.draw(),this._drawSeries()},_drawSeries:function(){if(this._drawing)this._callLater=!0;else{var e,t,i,s=this.get("graphic");for(s.set("autoDraw",!1),s.set("width",this.get("width")),s.set("height",this.get("height")),this._callLater=!1,this._drawing=!0,t=0,i=(e=this.get("seriesCollection"))?e.length:0;t<i;++t)if(e[t].draw(),(!e[t].get("xcoords")||!e[t].get("ycoords"))&&!e[t]instanceof C.PieSeries){this._callLater=!0;break}this._drawing=!1,this._callLater&&this._drawSeries()}},_drawingCompleteHandler:function(e){var e=e.currentTarget,e=C.Array.indexOf(this._dispatchers,e);-1<e&&this._dispatchers.splice(e,1),this._dispatchers.length<1&&((e=this.get("graphic")).get("autoDraw")||e._redraw(),this.fire(
"chartRendered"))},_getDefaultStyles:function(){return{background:{shape:"rect",fill:{color:"#faf9f2"},border:{color:"#dad8c9",weight:1}}}},destructor:function(){this._graphic&&(this._graphic.destroy(),this._graphic=null),this._background&&(this._background.get("graphic").destroy(),this._background=null),this._gridlines&&(this._gridlines.get("graphic").destroy(),this._gridlines=null)}},{ATTRS:{x:{setter:function(e){return this.get("boundingBox").setStyle("left",e+"px"),e}},y:{setter:function(e){return this.get("boundingBox").setStyle("top",e+"px"),e}},chart:{getter:function(){return this._state.chart||this}},seriesCollection:{getter:function(){return this._seriesCollection},setter:function(e){return this._parseSeriesCollection(e),this._seriesCollection}},showBackground:{value:!0},seriesDictionary:{readOnly:!0,getter:function(){return this._seriesDictionary}},horizontalGridlines:{value:null,setter:function(e){var t,i,s=this.get("horizontalGridlines");if(s&&s instanceof C.Gridlines&&s.remove(),e instanceof C.Gridlines)return(s=e).set("graph",this),e;if(e){for(i in t={direction:"horizonal",graph:this},e)e.hasOwnProperty(i)&&(t[i]=e[i]);return s=new C.Gridlines(t)}}},verticalGridlines:{value:null,setter:function(e){var t,i,s=this.get("verticalGridlines");if(s&&s instanceof C.Gridlines&&s.remove(),e instanceof C.Gridlines)return(s=e).set("graph",this),e;if(e){for(i in t={direction:"vertical",graph:this},e)e.hasOwnProperty(i)&&(t[i]=e[i]);return s=new C.Gridlines(t)}}},background:{getter:function(){return this._background||(this._backgroundGraphic=new C.Graphic({render:this.get("contentBox")}),this._backgroundGraphic.get("node").style.zIndex=0,this._background=this._backgroundGraphic.addShape({type:"rect"})),this._background}},gridlines:{readOnly:!0,getter:function(){return this._gridlines||(this._gridlinesGraphic=new C.Graphic({render:this.get("contentBox")}),this._gridlinesGraphic.get("node").style.zIndex=1,this._gridlines=this._gridlinesGraphic.addShape({type:"path"})),this._gridlines}},graphic:{readOnly:!0,getter:function(){return this._graphic||(this._graphic=new C.Graphic({render:this.get("contentBox")}),this._graphic.get("node").style.zIndex=2,this._graphic.set("autoDraw",!1)),this._graphic}},groupMarkers:{value:!1}}}),s.ATTRS={dataProvider:{lazyAdd:!1,valueFn:function(){var e=[];return this._wereSeriesKeysExplicitlySet()||this.set("seriesKeys",this._buildSeriesKeys(e),{src:"internal"}),e},setter:function(e){e=this._setDataValues(e);return this._wereSeriesKeysExplicitlySet()||this.set("seriesKeys",this._buildSeriesKeys(e),{src:"internal"}),e}},seriesKeys:{lazyAdd:!1,setter:function(e){var t=arguments[2];return!e||t&&t.src&&"internal"===t.src?this._seriesKeysExplicitlySet=!1:this._seriesKeysExplicitlySet=!0,e}},ariaLabel:{value:"Chart Application",setter:function(e){var t=this.get("contentBox");return t&&t.setAttribute("aria-label",e),e}},ariaDescription:{value:"Use the up and down keys to navigate between series. Use the left and right keys to navigate through items in a series.",setter:function(e){return this._description&&this._description.set("text",e),e}},tooltip:{valueFn:"_getTooltip",setter:function(e){return this._updateTooltip(e)}},categoryKey:{value:"category"},categoryType:{value:"category"},interactionType:{value:"marker"},axesCollection:{},graph:{valueFn:"_getGraph"},groupMarkers:{value:!1}},s.prototype={_wereSeriesKeysExplicitlySet:function(){return this.get("seriesKeys")&&this._seriesKeysExplicitlySet},_groupMarkersChangeHandler:function(e){var t=this.get("graph"),e=e.newVal;t&&t.set("groupMarkers",e)},_itemRendered:function(e){this._itemRenderQueue=this._itemRenderQueue.splice(1+C.Array.indexOf(this._itemRenderQueue,e.currentTarget),1),this._itemRenderQueue.length<1&&this._redraw()},_getGraph:function(){var e=new C.Graph({chart:this,groupMarkers:this.get("groupMarkers")});return e.after("chartRendered",C.bind(function(){this.fire("chartRendered")},this)),e},getSeries:function(e){var t=null,i=this.get("graph");return t=i?k.isNumber(e)?i.getSeriesByIndex(e):i.getSeriesByKey(e):t},getAxisByKey:function(e){var t,i=this.get("axes");return t=i&&i.hasOwnProperty(e)?i[e]:t},getCategoryAxis:function(){var e,t=this.get("categoryKey"),i=this.get("axes");return e=i.hasOwnProperty(t)?i[t]:e},_direction:"horizontal",_dataProvider:null,_setDataValues:function(e){if(k.isArray(e[0])){for(var t,i,s=[],r=e[0],n=0,a=r.length,o=e.length;n<a;++n){for(t={category:r[n]},i=1;i<o;++i)t["series"+i]=e[i][n];s[n]=t}return s}return e},_seriesCollection:null,_setSeriesCollection:function(e){this._seriesCollection=e},_getAxisClass:function(e){return this._axisClass[e]},_axisClass:{stacked:C.StackedAxis,numeric:C.NumericAxis,category:C.CategoryAxis,time:C.TimeAxis},_axes:null,initializer:function(){this._itemRenderQueue=[],this._seriesIndex=-1,this._itemIndex=-1,this.after("dataProviderChange",this._dataProviderChangeHandler)},renderUI:function(){var e=this.get("tooltip"),t=this.get("boundingBox"),i=this.get("contentBox");t.setStyle("position","absolute"),i.setStyle("position","absolute"),this._addAxes(),this._addSeries(),e&&e.show&&this._addTooltip(),this._setAriaElements(t,i)},_setAriaElements:function(e,t){var i=this._getAriaOffscreenNode(),s=this.get("id")+"_description",r=this._getAriaOffscreenNode();t.set("tabIndex",0),t.set("role","img"),t.setAttribute("aria-label",this.get("ariaLabel")),t.setAttribute("aria-describedby",s),i.set("id",s),i.set("tabIndex",-1),i.set("text",this.get("ariaDescription")),r.set("id","live-region"),r.set("aria-live","polite"),r.set("aria-atomic","true"),r.set("role","status"),e.setAttribute("role","application"),e.appendChild(i),e.appendChild(r),this._description=i,this._liveRegion=r},_getAriaOffscreenNode:function(){var e=C.Node.create("<div></div>"),t=C.UA.ie,t=t&&t<8?"rect(1px 1px 1px 1px)":"rect(1px, 1px, 1px, 1px)";return e.setStyle("position","absolute"),e.setStyle("height","1px"),e.setStyle("width","1px"),e.setStyle("overflow","hidden"),e.setStyle("clip",t),e},
syncUI:function(){this._redraw()},bindUI:function(){this.after("tooltipChange",C.bind(this._tooltipChangeHandler,this)),this.after("widthChange",this._sizeChanged),this.after("heightChange",this._sizeChanged),this.after("groupMarkersChange",this._groupMarkersChangeHandler);var e,i=this.get("tooltip"),t="mouseout",s="mouseover",r=this.get("contentBox"),n=this.get("interactionType"),a=0,o="."+d,h=l&&"ontouchstart"in l&&!(C.UA.chrome&&C.UA.chrome<6);if(C.on("keydown",C.bind(function(e){var t=e.keyCode,t=parseFloat(t);36<t&&t<41&&(e.halt(),e=this._getAriaMessage(t),this._liveRegion.set("text",e))},this),this.get("contentBox")),"marker"===n?(t=i.hideEvent,s=i.showEvent,h&&(C.delegate("touchend",C.bind(this._markerEventDispatcher,this),r,o),C.on("touchend",C.bind(function(e){r.contains(e.target)&&e.halt(!0),this._activeMarker&&(this._activeMarker=null,this.hideTooltip(e))},this))),C.delegate("mouseenter",C.bind(this._markerEventDispatcher,this),r,o),C.delegate("mousedown",C.bind(this._markerEventDispatcher,this),r,o),C.delegate("mouseup",C.bind(this._markerEventDispatcher,this),r,o),C.delegate("mouseleave",C.bind(this._markerEventDispatcher,this),r,o),C.delegate("click",C.bind(this._markerEventDispatcher,this),r,o),C.delegate("mousemove",C.bind(this._positionTooltip,this),r,o)):"planar"===n&&(h?this._overlay.on("touchend",C.bind(this._planarEventDispatcher,this)):(this._overlay.on("mousemove",C.bind(this._planarEventDispatcher,this)),this.on("mouseout",this.hideTooltip))),i)if(this.on("markerEvent:touchend",C.bind(function(e){var t=e.series.get("markers")[e.index];this._activeMarker&&t===this._activeMarker?(this._activeMarker=null,this.hideTooltip(e)):(this._activeMarker=t,i.markerEventHandler.apply(this,[e]))},this)),t&&s&&t===s)this.on(n+"Event:"+t,this.toggleTooltip);else if(s&&this.on(n+"Event:"+s,i[n+"EventHandler"]),t){if(k.isArray(t))for(e=t.length;a<e;++a)this.on(n+"Event:"+t[a],this.hideTooltip);this.on(n+"Event:"+t,this.hideTooltip)}},_markerEventDispatcher:function(e){var t=e.type,i=this.get("contentBox"),s=e.currentTarget,r=s.getAttribute("id").split("_"),n=r.pop(),r=r.pop(),a=this.getSeries(parseInt(r,10)),o=this.getSeriesItems(a,n),h=e&&e.hasOwnProperty("changedTouches"),l=(h?e.changedTouches[0]:e).pageX,h=(h?e.changedTouches[0]:e).pageY,g=l-i.getX(),i=h-i.getY();"mouseenter"===t?t="mouseover":"mouseleave"===t&&(t="mouseout"),a.updateMarkerState(t,n),e.halt(),this.fire("markerEvent:"+t,{originEvent:e,pageX:l,pageY:h,categoryItem:o.category,valueItem:o.value,node:s,x:g,y:i,series:a,index:n,seriesIndex:r})},_dataProviderChangeHandler:function(e){var t,i,s,r=e.newVal;if(this._seriesIndex=-1,this._itemIndex=-1,this instanceof C.CartesianChart&&(this.set("axes",this.get("axes")),this.set("seriesCollection",this.get("seriesCollection"))),t=this.get("axes"))for(i in t)t.hasOwnProperty(i)&&(s=t[i])instanceof C.Axis&&("none"!==s.get("position")&&this._addToAxesRenderQueue(s),s.set("dataProvider",r))},toggleTooltip:function(e){var t=this.get("tooltip");t.visible?this.hideTooltip():t.markerEventHandler.apply(this,[e])},_showTooltip:function(e,t,i){var s=this.get("tooltip"),r=s.node;e&&(s.visible=!0,s.setTextFunction(r,e),r.setStyle("top",i+"px"),r.setStyle("left",t+"px"),r.setStyle("visibility","visible"))},_positionTooltip:function(e){var t=this.get("tooltip").node,i=this.get("contentBox"),s=e.pageX+10-i.getX(),e=e.pageY+10-i.getY();t&&(t.setStyle("left",s+"px"),t.setStyle("top",e+"px"))},hideTooltip:function(){var e=this.get("tooltip"),t=e.node;e.visible=!1,t.set("innerHTML",""),t.setStyle("left",-1e4),t.setStyle("top",-1e4),t.setStyle("visibility","hidden")},_addTooltip:function(){var e=this.get("tooltip"),t=this.get("id")+"_tooltip",i=this.get("contentBox"),s=g.getElementById(t);s&&i.removeChild(s),e.node.set("id",t),e.node.setStyle("visibility","hidden"),i.appendChild(e.node)},_updateTooltip:function(e){var t,i,s,r=this.get("tooltip")||this._getTooltip();if(k.isObject(e)){if(i=e.styles,s=e.node&&r.node?(r.node.destroy(!0),C.one(e.node)):r.node,i)for(t in i)i.hasOwnProperty(t)&&s.setStyle(t,i[t]);for(t in{markerLabelFunction:"markerLabelFunction",planarLabelFunction:"planarLabelFunction",setTextFunction:"setTextFunction",showEvent:"showEvent",hideEvent:"hideEvent",markerEventHandler:"markerEventHandler",planarEventHandler:"planarEventHandler",show:"show"})e.hasOwnProperty(t)&&(r[t]=e[t]);r.node=s}return r},_getTooltip:function(){var e=g.createElement("div"),t=r("chart-tooltip"),i={setTextFunction:this._setText,markerLabelFunction:this._tooltipLabelFunction,planarLabelFunction:this._planarLabelFunction,show:!0,hideEvent:"mouseout",showEvent:"mouseover",markerEventHandler:function(e){var t=this.get("tooltip").markerLabelFunction.apply(this,[e.categoryItem,e.valueItem,e.index,e.series,e.seriesIndex]);this._showTooltip(t,e.x+10,e.y+10)},planarEventHandler:function(e){var t=this.get("tooltip"),i=this.get("categoryAxis"),i=t.planarLabelFunction.apply(this,[i,e.valueItem,e.index,e.items,e.seriesIndex]);this._showTooltip(i,e.x+10,e.y+10)}};return(e=C.one(e)).set("id",this.get("id")+"_tooltip"),e.setStyle("fontSize","85%"),e.setStyle("opacity","0.83"),e.setStyle("position","absolute"),e.setStyle("paddingTop","2px"),e.setStyle("paddingRight","5px"),e.setStyle("paddingBottom","4px"),e.setStyle("paddingLeft","2px"),e.setStyle("backgroundColor","#fff"),e.setStyle("border","1px solid #dbdccc"),e.setStyle("pointerEvents","none"),e.setStyle("zIndex",3),e.setStyle("whiteSpace","noWrap"),e.setStyle("visibility","hidden"),e.addClass(t),i.node=C.one(e),i},_planarLabelFunction:function(e,t,i,s){var r,n,a=g.createElement("div"),o=0,h=s.length;for(e&&(e=e.get("labelFunction").apply(this,[e.getKeyValueAt(this.get("categoryKey"),i),e.get("labelFormat")]),k.isObject(e)||(e=g.createTextNode(e)),a.appendChild(e));o<h;++o)s[o].get("visible")&&(n=(n=(r=t[o]).axis).get("labelFunction").apply(this,[n.getKeyValueAt(r.key,i),n.get("labelFormat")]),a.appendChild(g.createElement("br")),a.appendChild(g.createTextNode(
r.displayName)),a.appendChild(g.createTextNode(": ")),k.isObject(n)||(n=g.createTextNode(n)),a.appendChild(n));return a},_tooltipLabelFunction:function(e,t){var i=g.createElement("div"),s=e.axis.get("labelFunction").apply(this,[e.value,e.axis.get("labelFormat")]),r=t.axis.get("labelFunction").apply(this,[t.value,t.axis.get("labelFormat")]);return i.appendChild(g.createTextNode(e.displayName)),i.appendChild(g.createTextNode(": ")),k.isObject(s)||(s=g.createTextNode(s)),i.appendChild(s),i.appendChild(g.createElement("br")),i.appendChild(g.createTextNode(t.displayName)),i.appendChild(g.createTextNode(": ")),k.isObject(r)||(r=g.createTextNode(r)),i.appendChild(r),i},_tooltipChangeHandler:function(){var e,t,i;this.get("tooltip")&&(e=(t=this.get("tooltip")).node,t=t.show,i=this.get("contentBox"),e&&t&&(i.contains(e)||this._addTooltip()))},_setText:function(e,t){e.empty(),k.isNumber(t)?t+="":t=t||"",i(t)&&(t=g.createTextNode(t)),e.appendChild(t)},_getAllKeys:function(e){for(var t,i,s=0,r=e.length,n={};s<r;++s)for(i in t=e[s])t.hasOwnProperty(i)&&(n[i]=!0);return n},_buildSeriesKeys:function(e){var t,i,s=this.get("categoryKey"),r=[];if(this._seriesKeysExplicitlySet)return this._seriesKeys;for(i in t=this._getAllKeys(e))t.hasOwnProperty(i)&&i!==s&&r.push(i);return r}},C.ChartBase=s,C.CartesianChart=C.Base.create("cartesianChart",C.Widget,[C.ChartBase,C.Renderer],{renderUI:function(){var e=this.get("boundingBox"),t=this.get("contentBox"),i=this.get("tooltip"),s=r("overlay");e.setStyle("position","absolute"),t.setStyle("position","absolute"),this._addAxes(),this._addGridlines(),this._addSeries(),i&&i.show&&this._addTooltip(),"planar"===this.get("interactionType")&&(this._overlay=C.Node.create("<div></div>"),this._overlay.set("id",this.get("id")+"_overlay"),this._overlay.setStyle("position","absolute"),this._overlay.setStyle("background","#fff"),this._overlay.setStyle("opacity",0),this._overlay.addClass(s),this._overlay.setStyle("zIndex",4),t.append(this._overlay)),this._setAriaElements(e,t),this._redraw()},_planarEventDispatcher:function(e){var t,i,s,r,n,a,o,h,l,g=this.get("graph"),d=this.get("boundingBox"),c=g.get("contentBox"),u=e&&e.hasOwnProperty("changedTouches"),p=(u?e.changedTouches[0]:e).pageX,u=(u?e.changedTouches[0]:e).pageY,y=p-d.getX(),d=u-d.getY(),c={x:p-c.getX(),y:u-c.getY()},f=g.get("seriesCollection"),_=0,x=this._selectedIndex,v=[],m=[],b=[],g=this.get("direction");if(e.halt(!0),"horizontal"===g?(r="x",n="y"):(n="x",r="y"),a=c[r],f)for(h=f.length;_<h&&!o;)f[_]&&(o=f[_].get(r+"MarkerPlane")),_++;if(o){for(h=o.length,_=0;_<h;++_)if(a<=o[_].end&&a>=o[_].start){i=_;break}for(h=f.length,_=0;_<h;++_)l=(t=f[_]).get(n+"coords"),(s=t.get("markers"))&&!isNaN(x)&&-1<x&&t.updateMarkerState("mouseout",x),l&&-1<l[i]&&(s&&!isNaN(i)&&-1<i&&t.updateMarkerState("mouseover",i),l=this.getSeriesItems(t,i),m.push(l.category),b.push(l.value),v.push(t));-1<(this._selectedIndex=i)?this.fire("planarEvent:mouseover",{categoryItem:m,valueItem:b,x:y,y:d,pageX:p,pageY:u,items:v,index:i,originEvent:e}):this.fire("planarEvent:mouseout")}},_type:"combo",_itemRenderQueue:null,_addToAxesRenderQueue:function(e){this._itemRenderQueue||(this._itemRenderQueue=[]),C.Array.indexOf(this._itemRenderQueue,e)<0&&this._itemRenderQueue.push(e)},_addToAxesCollection:function(e,t){var i=this.get(e+"AxesCollection");i||this.set(e+"AxesCollection",i=[]),i.push(t)},_getDefaultSeriesCollection:function(){var e;return e=this.get("dataProvider")?this._parseSeriesCollection():e},_parseSeriesCollection:function(e){var t,i,s,r,n,a,o,h,l,g,d,c=this.get("direction"),u=this.get("styles").series,p=u&&k.isArray(u),y=[],f=[],_=this.get("seriesKeys").concat(),x=this.get("type"),v=[],m=this.get("categoryKey"),b=this.get("showMarkers"),A=this.get("showAreaFill"),S=this.get("showLines"),w="vertical"===c?(s="yAxis",l="yKey",r="xAxis","xKey"):(s="xAxis",l="xKey",r="yAxis","yKey");for((e=e?e.concat():[]).length;e&&0<e.length;)n=e.shift(),((h=this._getBaseAttribute(n,w))&&-1<(o=C.Array.indexOf(_,h))?(_.splice(o,1),f.push(h),y):v).push(n);for(;0<v.length;)n=v.shift(),0<_.length?(h=_.shift(),this._setBaseAttribute(n,w,h),f.push(h),y.push(n)):n instanceof C.CartesianSeries&&n.destroy(!0);for(d=(f=0<_.length?f.concat(_):f).length,a=0;a<d;++a)(n=y[a]||{type:x})instanceof C.CartesianSeries?this._parseSeriesAxes(n):(n[l]=n[l]||m,n[w]=n[w]||_.shift(),n[s]=this._getCategoryAxis(),n[r]=this._getSeriesAxis(n[w]),n.type=n.type||x,n.direction=n.direction||c,"combo"!==n.type&&"stackedcombo"!==n.type&&"combospline"!==n.type&&"stackedcombospline"!==n.type||(null!==A&&(n.showAreaFill=null!==n.showAreaFill&&n.showAreaFill!==undefined?n.showAreaFill:A),null!==b&&(n.showMarkers=null!==n.showMarkers&&n.showMarkers!==undefined?n.showMarkers:b),null!==S&&(n.showLines=null!==n.showLines&&n.showLines!==undefined?n.showLines:S)),u&&(i=u[p?a:n[w]])&&(t=n.styles,n.styles=t?this._mergeStyles(t,i):i),y[a]=n);return y&&((g=this.get("graph")).set("seriesCollection",y),y=g.get("seriesCollection")),y},_parseSeriesAxes:function(e){var t,i=this.get("axes"),s=e.get("xAxis"),r=e.get("yAxis"),n=C.Axis;s&&!(s instanceof n)&&k.isString(s)&&i.hasOwnProperty(s)&&(t=i[s])instanceof n&&e.set("xAxis",t),r&&!(r instanceof n)&&k.isString(r)&&i.hasOwnProperty(r)&&(t=i[r])instanceof n&&e.set("yAxis",t)},_getCategoryAxis:function(){return this.get("axes")[this.get("categoryAxisName")||this.get("categoryKey")]},_getSeriesAxis:function(e,t){var i,s,r,n=this.get("axes");if(n)if(t&&n.hasOwnProperty(t))r=n[t];else for(i in n)if(n.hasOwnProperty(i)&&(s=n[i].get("keys"))&&s.hasOwnProperty(e)){r=n[i];break}return r},_getBaseAttribute:function(e,t){return e instanceof C.Base?e.get(t):e.hasOwnProperty(t)?e[t]:null},_setBaseAttribute:function(e,t,i){e instanceof C.Base?e.set(t,i):e[t]=i},_setAxes:function(e){var t,i,s,r,n,a,o,h,l=this._parseAxes(e),g={},d={edgeOffset:"edgeOffset",calculateEdgeOffset:"calculateEdgeOffset",position:"position",overlapGraph:"overlapGraph",labelValues:"labelValues",
hideFirstMajorUnit:"hideFirstMajorUnit",hideLastMajorUnit:"hideLastMajorUnit",labelFunction:"labelFunction",labelFunctionScope:"labelFunctionScope",labelFormat:"labelFormat",appendLabelFunction:"appendLabelFunction",appendTitleFunction:"appendTitleFunction",maximum:"maximum",minimum:"minimum",roundingMethod:"roundingMethod",alwaysShowZero:"alwaysShowZero",scaleType:"scaleType",title:"title",width:"width",height:"height"},c=this.get("dataProvider");for(i in l)if(l.hasOwnProperty(i)){if((a=l[i])instanceof C.Axis)r=a;else{for(t in r=null,(o={}).dataProvider=a.dataProvider||c,o.keys=a.keys,a.hasOwnProperty("roundingUnit")&&(o.roundingUnit=a.roundingUnit),s=a.position,a.styles&&(o.styles=a.styles),o.position=a.position,d)d.hasOwnProperty(t)&&a.hasOwnProperty(t)&&(o[t]=a[t]);(r=e?this.getAxisByKey(i):r)&&r instanceof C.Axis?(s!==(n=r.get("position"))&&("none"!==n&&(h=this.get(n+"AxesCollection")).splice(C.Array.indexOf(h,r),1),"none"!==s&&this._addToAxesCollection(s,r)),r.setAttrs(o)):(r=new(this._getAxisClass(a.type))(o)).after("axisRendered",C.bind(this._itemRendered,this))}r&&((h=this.get(s+"AxesCollection"))&&0<C.Array.indexOf(h,r)&&r.set("overlapGraph",!1),g[i]=r)}return g},_addAxes:function(){var e,t,i,s=this.get("axes"),r=this.get("width"),n=this.get("height"),a=C.Node.one(this._parentNode);for(e in this._axesCollection||(this._axesCollection=[]),s)s.hasOwnProperty(e)&&(t=s[e])instanceof C.Axis&&(r||(this.set("width",a.get("offsetWidth")),r=this.get("width")),n||(this.set("height",a.get("offsetHeight")),n=this.get("height")),this._addToAxesRenderQueue(t),i=t.get("position"),this.get(i+"AxesCollection")?this.get(i+"AxesCollection").push(t):this.set(i+"AxesCollection",[t]),this._axesCollection.push(t),t.get("keys").hasOwnProperty(this.get("categoryKey"))&&this.set("categoryAxis",t),t.render(this.get("contentBox")))},_addSeries:function(){this.get("graph").render(this.get("contentBox"))},_addGridlines:function(){var e,t=this.get("graph"),i=this.get("horizontalGridlines"),s=this.get("verticalGridlines"),r=this.get("direction"),n=this.get("leftAxesCollection"),a=this.get("rightAxesCollection"),o=this.get("bottomAxesCollection"),h=this.get("topAxesCollection"),l=this.get("categoryAxis");this._axesCollection&&(e=this._axesCollection.concat()).splice(C.Array.indexOf(e,l),1),i&&(n=n&&n[0]?n[0]:a&&a[0]?a[0]:"horizontal"===r?l:e[0],!this._getBaseAttribute(i,"axis")&&n&&this._setBaseAttribute(i,"axis",n),this._getBaseAttribute(i,"axis")&&t.set("horizontalGridlines",i)),s&&(a=o&&o[0]?o[0]:h&&h[0]?h[0]:"vertical"===r?l:e[0],!this._getBaseAttribute(s,"axis")&&a&&this._setBaseAttribute(s,"axis",a),this._getBaseAttribute(s,"axis")&&t.set("verticalGridlines",s))},_getDefaultAxes:function(){var e;return e=this.get("dataProvider")?this._parseAxes():e},_parseAxes:function(e){var t,i,s,r,n,a,o,h,l,g=this.get("categoryKey"),d={},c=[],u=[],p=this.get("categoryAxisName")||this.get("categoryKey"),y=this.get("valueAxisName"),f=this.get("seriesKeys").concat(),_=this.get("direction"),x=[],v=this.get("stacked")?"stacked":"numeric",_="vertical"===_?(l="bottom","left"):(l="left","bottom");if(e)for(r in e)if(e.hasOwnProperty(r))if(t=e[r],s=this._getBaseAttribute(t,"keys"),"time"===(i=this._getBaseAttribute(t,"type"))||"category"===i)p=r,this.set("categoryAxisName",r),k.isArray(s)&&0<s.length&&(g=s[0],this.set("categoryKey",g)),d[r]=t;else if(r===p)d[r]=t;else{if(d[r]=t,r!==y&&s&&k.isArray(s)){for(o=s.length,a=0;a<o;++a)c.push(s[a]);x.push(d[r])}this._getBaseAttribute(d[r],"type")||this._setBaseAttribute(d[r],"type",v),this._getBaseAttribute(d[r],"position")||this._setBaseAttribute(d[r],"position",this._getDefaultAxisPosition(d[r],x,l))}for(-1<(h=C.Array.indexOf(f,g))&&f.splice(h,1),n=f.length,r=0;r<n;++r)-1<(h=C.Array.indexOf(c,f[r]))&&(u=u.concat(c.splice(h,1)));for(n=(c=u.concat(c)).length,r=0;r<n;r+=1)-1<(h=C.Array.indexOf(f,c[r]))&&f.splice(h,1);return d.hasOwnProperty(p)||(d[p]={}),this._getBaseAttribute(d[p],"keys")||this._setBaseAttribute(d[p],"keys",[g]),this._getBaseAttribute(d[p],"position")||this._setBaseAttribute(d[p],"position",_),this._getBaseAttribute(d[p],"type")||this._setBaseAttribute(d[p],"type",this.get("categoryType")),!d.hasOwnProperty(y)&&f&&0<f.length&&(d[y]={keys:f},x.push(d[y])),0<c.length&&(f=0<f.length?c.concat(f):c),d.hasOwnProperty(y)&&(this._getBaseAttribute(d[y],"position")||this._setBaseAttribute(d[y],"position",this._getDefaultAxisPosition(d[y],x,l)),this._setBaseAttribute(d[y],"type",v),this._setBaseAttribute(d[y],"keys",f)),this._wereSeriesKeysExplicitlySet()||this.set("seriesKeys",f,{src:"internal"}),d},_getDefaultAxisPosition:function(e,t,i){var s=this.get("direction"),e=C.Array.indexOf(t,e);return t[e-1]&&t[e-1].position&&("horizontal"===s?"left"===t[e-1].position?i="right":"right"===t[e-1].position&&(i="left"):i="bottom"===t[e-1].position?"top":"bottom"),i},getSeriesItems:function(e,t){var i,s,r=e.get("xAxis"),n=e.get("yAxis"),a=e.get("xKey"),o=e.get("yKey");return"vertical"===this.get("direction")?(i={axis:n,key:o,value:n.getKeyValueAt(o,t)},s={axis:r,key:a,value:r.getKeyValueAt(a,t)}):(s={axis:n,key:o,value:n.getKeyValueAt(o,t)},i={axis:r,key:a,value:r.getKeyValueAt(a,t)}),i.displayName=e.get("categoryDisplayName"),s.displayName=e.get("valueDisplayName"),i.value=i.axis.getKeyValueAt(i.key,t),s.value=s.axis.getKeyValueAt(s.key,t),{category:i,value:s}},_sizeChanged:function(){if(this._axesCollection){for(var e=this._axesCollection,t=0,i=e.length;t<i;++t)this._addToAxesRenderQueue(e[t]);this._redraw()}},_getTopOverflow:function(e,t,i){var s,r,n=0,a=0;if(e)for(s=e.length;n<s;++n)r=e[n],a=Math.max(a,Math.abs(r.getMaxLabelBounds().top)-r.getEdgeOffset(r.get("styles").majorTicks.count,i));if(t)for(n=0,s=t.length;n<s;++n)r=t[n],a=Math.max(a,Math.abs(r.getMaxLabelBounds().top)-r.getEdgeOffset(r.get("styles").majorTicks.count,i));return a},_getRightOverflow:function(e,t,i){var s,r,n=0,a=0;if(e)for(s=e.length;n<s;++n)r=e[n],a=Math.max(a,r.getMaxLabelBounds().right-r.getEdgeOffset(r.get(
"styles").majorTicks.count,i));if(t)for(n=0,s=t.length;n<s;++n)r=t[n],a=Math.max(a,r.getMaxLabelBounds().right-r.getEdgeOffset(r.get("styles").majorTicks.count,i));return a},_getLeftOverflow:function(e,t,i){var s,r,n=0,a=0;if(e)for(s=e.length;n<s;++n)r=e[n],a=Math.max(a,Math.abs(r.getMinLabelBounds().left)-r.getEdgeOffset(r.get("styles").majorTicks.count,i));if(t)for(n=0,s=t.length;n<s;++n)r=t[n],a=Math.max(a,Math.abs(r.getMinLabelBounds().left)-r.getEdgeOffset(r.get("styles").majorTicks.count,i));return a},_getBottomOverflow:function(e,t,i){var s,r,n=0,a=0;if(e)for(s=e.length;n<s;++n)r=e[n],a=Math.max(a,r.getMinLabelBounds().bottom-r.getEdgeOffset(r.get("styles").majorTicks.count,i));if(t)for(n=0,s=t.length;n<s;++n)r=t[n],a=Math.max(a,r.getMinLabelBounds().bottom-r.getEdgeOffset(r.get("styles").majorTicks.count,i));return a},_redraw:function(){if(this._drawing)this._callLater=!0;else{this._drawing=!0,this._callLater=!1;var e,t,i,s,r,n,a,o,h,l,g,d,c,u,p=this.get("width"),y=this.get("height"),f=0,_=0,x=0,v=0,m=this.get("leftAxesCollection"),b=this.get("rightAxesCollection"),A=this.get("topAxesCollection"),S=this.get("bottomAxesCollection"),w=0,C="visible",k=this.get("graph"),T=this.get("allowContentOverflow"),B={};if(m)for(d=[],w=(e=m.length)-1;-1<w;--w)d.unshift(f),f+=m[w].get("width");if(b)for(g=[],w=0,w=(e=b.length)-1;-1<w;--w)_+=b[w].get("width"),g.unshift(p-_);if(A)for(c=[],w=(e=A.length)-1;-1<w;--w)c.unshift(x),x+=A[w].get("height");if(S)for(u=[],w=(e=S.length)-1;-1<w;--w)v+=S[w].get("height"),u.unshift(y-v);if(B.left=f,B.top=x,B.bottom=y-v,B.right=p-_,!T){if(T=this._getTopOverflow(m,b),i=this._getBottomOverflow(m,b),s=this._getLeftOverflow(S,A),r=this._getRightOverflow(S,A),0<(l=T-x)&&(B.top=T,c))for(w=0,e=c.length;w<e;++w)c[w]+=l;if(0<(l=i-v)&&(B.bottom=y-i,u))for(w=0,e=u.length;w<e;++w)u[w]-=l;if(0<(l=s-f)&&(B.left=s,d))for(w=0,e=d.length;w<e;++w)d[w]+=l;if(0<(l=r-_)&&(B.right=p-r,g))for(w=0,e=g.length;w<e;++w)g[w]-=l}if(n=B.right-B.left,a=B.bottom-B.top,o=B.left,h=B.top,A){for(e=A.length,w=0;w<e;w++)(t=A[w]).get("width")!==n&&t.set("width",n),t.get("boundingBox").setStyle("left",o+"px"),t.get("boundingBox").setStyle("top",c[w]+"px");t._hasDataOverflow()&&(C="hidden")}if(S){for(e=S.length,w=0;w<e;w++)(t=S[w]).get("width")!==n&&t.set("width",n),t.get("boundingBox").setStyle("left",o+"px"),t.get("boundingBox").setStyle("top",u[w]+"px");t._hasDataOverflow()&&(C="hidden")}if(m){for(e=m.length,w=0;w<e;++w)(t=m[w]).get("boundingBox").setStyle("top",h+"px"),t.get("boundingBox").setStyle("left",d[w]+"px"),t.get("height")!==a&&t.set("height",a);t._hasDataOverflow()&&(C="hidden")}if(b){for(e=b.length,w=0;w<e;++w)(t=b[w]).get("boundingBox").setStyle("top",h+"px"),t.get("boundingBox").setStyle("left",g[w]+"px"),t.get("height")!==a&&t.set("height",a);t._hasDataOverflow()&&(C="hidden")}this._drawing=!1,this._callLater?this._redraw():(k&&(k.get("boundingBox").setStyle("left",o+"px"),k.get("boundingBox").setStyle("top",h+"px"),k.set("width",n),k.set("height",a),k.get("boundingBox").setStyle("overflow",C)),this._overlay&&(this._overlay.setStyle("left",o+"px"),this._overlay.setStyle("top",h+"px"),this._overlay.setStyle("width",n+"px"),this._overlay.setStyle("height",a+"px")))}},destructor:function(){var e,t=this.get("graph"),i=0,s=this.get("seriesCollection"),r=this._axesCollection,n=this.get("tooltip").node;for(this._description&&(this._description.empty(),this._description.remove(!0)),this._liveRegion&&(this._liveRegion.empty(),this._liveRegion.remove(!0)),e=s?s.length:0;i<e;++i)s[i]instanceof C.CartesianSeries&&s[i].destroy(!0);for(e=r?r.length:0,i=0;i<e;++i)r[i]instanceof C.Axis&&r[i].destroy(!0);t&&t.destroy(!0),n&&(n.empty(),n.remove(!0)),this._overlay&&(this._overlay.empty(),this._overlay.remove(!0))},_getAriaMessage:function(e){var t,i="",s=this._seriesIndex,r=this._itemIndex,n=this.get("seriesCollection").length;return e%2==0?(1<n?(38===e?s=s<1?n-1:s-1:40===e&&(s=n-1<=s?0:s+1),this._itemIndex=-1):s=0,this._seriesIndex=s,i=(t=this.getSeries(parseInt(s,10))).get("valueDisplayName")+" series."):(-1<s?(i="",t=this.getSeries(parseInt(s,10))):(this._seriesIndex=s=0,i=(t=this.getSeries(parseInt(s,10))).get("valueDisplayName")+" series."),n=t._dataLength||0,37===e?r=0<r?r-1:n-1:39===e&&(r=n-1<=r?0:r+1),this._itemIndex=r,e=(s=this.getSeriesItems(t,r)).category,t=s.value,e&&t&&e.value&&t.value?i=(i+=e.displayName+": "+e.axis.formatLabel.apply(this,[e.value,e.axis.get("labelFormat")])+", ")+t.displayName+": "+t.axis.formatLabel.apply(this,[t.value,t.axis.get("labelFormat")])+", ":i+="No data available.",i+=r+1+" of "+n+". "),i}},{ATTRS:{allowContentOverflow:{value:!1},axesStyles:{lazyAdd:!1,getter:function(){var e,t=this.get("axes"),i=this._axesStyles;if(t)for(e in t)t.hasOwnProperty(e)&&t[e]instanceof C.Axis&&((i=i||{})[e]=t[e].get("styles"));return i},setter:function(e){var t,i=this.get("axes");for(t in e)e.hasOwnProperty(t)&&i.hasOwnProperty(t)&&this._setBaseAttribute(i[t],"styles",e[t]);return e}},seriesStyles:{lazyAdd:!1,getter:function(){var e,t,i=this._seriesStyles,s=this.get("graph");if(s&&(e=s.get("seriesDictionary")))for(t in i={},e)e.hasOwnProperty(t)&&(i[t]=e[t].get("styles"));return i},setter:function(e){var t,i,s;if(k.isArray(e))for(s=this.get("seriesCollection"),t=0,i=e.length;t<i;++t)this._setBaseAttribute(s[t],"styles",e[t]);else for(t in e)e.hasOwnProperty(t)&&(s=this.getSeries(t),this._setBaseAttribute(s,"styles",e[t]));return e}},graphStyles:{lazyAdd:!1,getter:function(){var e=this.get("graph");return e?e.get("styles"):this._graphStyles},setter:function(e){var t=this.get("graph");return this._setBaseAttribute(t,"styles",e),e}},styles:{lazyAdd:!1,getter:function(){return{axes:this.get("axesStyles"),series:this.get("seriesStyles"),graph:this.get("graphStyles")}},setter:function(e){e.hasOwnProperty("axes")&&(this.get("axesStyles")?this.set("axesStyles",e.axes):this._axesStyles=e.axes),e.hasOwnProperty("series")&&(this.get("seriesStyles")?this.set("seriesStyles",e.series
):this._seriesStyles=e.series),e.hasOwnProperty("graph")&&this.set("graphStyles",e.graph)}},axes:{lazyAdd:!1,valueFn:"_getDefaultAxes",setter:function(e){return e=this.get("dataProvider")?this._setAxes(e):e}},seriesCollection:{lazyAdd:!1,valueFn:"_getDefaultSeriesCollection",setter:function(e){return this.get("dataProvider")?this._parseSeriesCollection(e):e}},leftAxesCollection:{},bottomAxesCollection:{},rightAxesCollection:{},topAxesCollection:{},stacked:{value:!1},direction:{getter:function(){var e=this.get("type");return"bar"===e?"vertical":"column"===e?"horizontal":this._direction},setter:function(e){return this._direction=e,this._direction}},showAreaFill:{},showMarkers:{},showLines:{},categoryAxisName:{},valueAxisName:{value:"values"},horizontalGridlines:{getter:function(){var e=this.get("graph");return e?e.get("horizontalGridlines"):this._horizontalGridlines},setter:function(e){var t=this.get("graph");e&&!k.isObject(e)&&(e={}),t?t.set("horizontalGridlines",e):this._horizontalGridlines=e}},verticalGridlines:{getter:function(){var e=this.get("graph");return e?e.get("verticalGridlines"):this._verticalGridlines},setter:function(e){var t=this.get("graph");e&&!k.isObject(e)&&(e={}),t?t.set("verticalGridlines",e):this._verticalGridlines=e}},type:{getter:function(){return this.get("stacked")?"stacked"+this._type:this._type},setter:function(e){return"bar"===this._type?"bar"!==e&&this.set("direction","horizontal"):"bar"===e&&this.set("direction","vertical"),this._type=e,this._type}},categoryAxis:{}}}),C.PieChart=C.Base.create("pieChart",C.Widget,[C.ChartBase],{_getSeriesCollection:function(){if(this._seriesCollection)return this._seriesCollection;var e,t,i,s=this.get("axes"),r=[],n=0,a=this.get("type");if(s)for(e=s.values.get("keyCollection"),i=s.category.get("keyCollection")[0],t=e.length;n<t;++n)r[n]={type:a},r[n].categoryAxis="category",r[n].valueAxis="values",r[n].categoryKey=i,r[n].valueKey=e[n];return this._seriesCollection=r},_parseAxes:function(e){this._axes||(this._axes={});var t,i,s,r,n,a=this.get("type"),o=this.get("width"),h=this.get("height"),l=C.Node.one(this._parentNode);for(t in o||(this.set("width",l.get("offsetWidth")),o=this.get("width")),h||(this.set("height",l.get("offsetHeight")),h=this.get("height")),e)e.hasOwnProperty(t)&&(s=e[t],i="pie"===a?"none":s.position,n=this._getAxisClass(s.type),r={dataProvider:this.get("dataProvider")},s.hasOwnProperty("roundingUnit")&&(r.roundingUnit=s.roundingUnit),r.keys=s.keys,r.width=o,r.height=h,r.position=i,r.styles=s.styles,(i=new n(r)).on("axisRendered",C.bind(this._itemRendered,this)),this._axes[t]=i)},_addAxes:function(){var e,t,i,s=this.get("axes");for(e in s||(this.set("axes",this._getDefaultAxes()),s=this.get("axes")),this._axesCollection||(this._axesCollection=[]),s)s.hasOwnProperty(e)&&(i=(t=s[e]).get("position"),this.get(i+"AxesCollection")?this.get(i+"AxesCollection").push(t):this.set(i+"AxesCollection",[t]),this._axesCollection.push(t))},_addSeries:function(){var e=this.get("graph"),t=this.get("seriesCollection");this._parseSeriesAxes(t),e.set("showBackground",!1),e.set("width",this.get("width")),e.set("height",this.get("height")),e.set("seriesCollection",t),this._seriesCollection=e.get("seriesCollection"),e.render(this.get("contentBox"))},_parseSeriesAxes:function(e){for(var t,i,s=0,r=e.length,n=this.get("axes");s<r;++s)(t=e[s])&&(t instanceof C.PieSeries?(!(i=t.get("categoryAxis"))||i instanceof C.Axis||t.set("categoryAxis",n[i]),!(i=t.get("valueAxis"))||i instanceof C.Axis||t.set("valueAxis",n[i])):(t.categoryAxis=n.category,t.valueAxis=n.values,t.type||(t.type=this.get("type"))))},_getDefaultAxes:function(){var e=this.get("categoryKey");return{values:{keys:this.get("seriesKeys").concat(),type:"numeric"},category:{keys:[e],type:this.get("categoryType")}}},getSeriesItems:function(e,t){var i={axis:e.get("categoryAxis"),key:e.get("categoryKey"),displayName:e.get("categoryDisplayName")},e={axis:e.get("valueAxis"),key:e.get("valueKey"),displayName:e.get("valueDisplayName")};return i.value=i.axis.getKeyValueAt(i.key,t),e.value=e.axis.getKeyValueAt(e.key,t),{category:i,value:e}},_sizeChanged:function(){this._redraw()},_redraw:function(){var e=this.get("graph"),t=this.get("width"),i=this.get("height");e&&(t=Math.min(t,i),e.set("width",t),e.set("height",t))},_tooltipLabelFunction:function(e,t,i,s){var r=g.createElement("div"),s=s.getTotalValues(),s=Math.round(t.value/s*1e4)/100;return r.appendChild(g.createTextNode(e.displayName+": "+e.axis.get("labelFunction").apply(this,[e.value,e.axis.get("labelFormat")]))),r.appendChild(g.createElement("br")),r.appendChild(g.createTextNode(t.displayName+": "+t.axis.get("labelFunction").apply(this,[t.value,t.axis.get("labelFormat")]))),r.appendChild(g.createElement("br")),r.appendChild(g.createTextNode(s+"%")),r},_getAriaMessage:function(e){var t,i="",s=this._itemIndex,r=this.getSeries(parseInt(0,10)),n=r.get("markers"),n=n&&n.length?n.length:0;return 37===e?s=0<s?s-1:n-1:39===e&&(s=n-1<=s?0:s+1),this._itemIndex=s,t=(e=this.getSeriesItems(r,s)).category,e=e.value,r=r.getTotalValues(),r=Math.round(e.value/r*1e4)/100,t&&e?i=(i=(i+=t.displayName+": "+t.axis.formatLabel.apply(this,[t.value,t.axis.get("labelFormat")])+", ")+e.displayName+": "+e.axis.formatLabel.apply(this,[e.value,e.axis.get("labelFormat")])+", ")+"Percent of total "+e.displayName+": "+r+"%,":i+="No data available,",i+=s+1+" of "+n+". "},destructor:function(){for(var e,t=this.get("tooltip").node,i=this.get("graph"),s=this._axesCollection,r=this.get("seriesCollection");0<r.length;)r.shift().destroy(!0);for(;0<s.length;)(e=s.shift())instanceof C.Axis&&e.destroy(!0);this._description&&(this._description.empty(),this._description.remove(!0)),this._liveRegion&&(this._liveRegion.empty(),this._liveRegion.remove(!0)),i&&i.destroy(!0),t&&(t.empty(),t.remove(!0))}},{ATTRS:{ariaDescription:{value:"Use the left and right keys to navigate through items.",setter:function(e){return this._description&&this._description.set("text",e),e}},axes:{
getter:function(){return this._axes},setter:function(e){this._parseAxes(e)}},seriesCollection:{lazyAdd:!1,getter:function(){return this._getSeriesCollection()},setter:function(e){return this._setSeriesCollection(e)}},type:{value:"pie"}}}),C.Chart=function(e){return new("pie"!==e.type?C.CartesianChart:C.PieChart)(e)}},"@VERSION@",{requires:["dom","event-mouseenter","event-touch","graphics-group","axes","series-pie","series-line","series-marker","series-area","series-spline","series-column","series-bar","series-areaspline","series-combo","series-combospline","series-line-stacked","series-marker-stacked","series-area-stacked","series-spline-stacked","series-column-stacked","series-bar-stacked","series-areaspline-stacked","series-combo-stacked","series-combospline-stacked"]});