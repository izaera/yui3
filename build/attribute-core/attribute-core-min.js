YUI.add("attribute-core",function(A,t){A.State=function(){this.data={}},A.State.prototype={add:function(t,e,i){(this.data[t]||(this.data[t]={}))[e]=i},addAll:function(t,e){var i,a=(a=this.data[t])||(this.data[t]={});for(i in e)e.hasOwnProperty(i)&&(a[i]=e[i])},remove:function(t,e){t=this.data[t];t&&delete t[e]},removeAll:function(i,t){t?A.each(t,function(t,e){this.remove(i,"string"==typeof e?e:t)},this):(t=this.data,i in t&&delete t[i])},get:function(t,e){t=this.data[t];if(t)return t[e]},getAll:function(t,e){var i,a,s=this.data[t];if(e)a=s;else if(s)for(i in a={},s)s.hasOwnProperty(i)&&(a[i]=s[i]);return a}};var _,g=A.Object,c=A.Lang,y=".",l="value",d="lazyAdd",h="added",a="_bypassProxy",v="initValue",s="lazy";function e(t,e,i){this._yuievt=null,this._initAttrHost(t,e,i)}_=e.INVALID_VALUE={},e._ATTR_CFG=["setter","getter","validator",l,"valueFn","writeOnce","readOnly",d,a],e.prototype={_initAttrHost:function(t,e,i){this._state=new A.State,this._initAttrs(t,e,i)},addAttr:function(t,e,i){var a,s,n=this._state,r=n.data;return d in(e=e||{})&&(i=e[d]),s=n.get(t,h),i&&!s?n.data[t]={lazy:e,added:!0}:s&&!e.isLazyAdd||((i=l in e)&&(a=e.value,e.value=undefined),e.added=!0,e.initializing=!0,r[t]=e,i&&this.set(t,a),e.initializing=!1),this},attrAdded:function(t){return!!this._state.get(t,h)},get:function(t){return this._getAttr(t)},_isLazyAttr:function(t){return this._state.get(t,s)},_addLazyAttr:function(t,e){var i=this._state;(e=e||i.get(t,s))&&(i.data[t].lazy=undefined,e.isLazyAdd=!0,this.addAttr(t,e))},set:function(t,e,i){return this._setAttr(t,e,i)},_set:function(t,e,i){return this._setAttr(t,e,i,!0)},_setAttr:function(t,e,i,a){var s,n,r,l,d,h,u,o=!0,f=this._state,_=this._stateProxy,c=this._tCfgs;if(-1!==t.indexOf(y)&&(t=(n=(s=t).split(y)).shift()),c&&c[t]&&this._addOutOfOrder(t,c[t]),(c=f.data[t]||{}).lazy&&(c=c.lazy,this._addLazyAttr(t,c)),f=c.value===undefined,_&&t in _&&!c._bypassProxy&&(f=!1),_=c.writeOnce,l=c.initializing,f||a||(_&&(o=!1),c.readOnly&&(o=!1)),o=l||a||"initOnly"!==_?o:!1){if(f||(r=this.get(t)),n){for(d=a=[r].reduce(function(e,i){return Object.keys(i).forEach(function(t){e[t]=i[t]}),e},{}),h=n.length-1,u=0;u<h&&d;u++)d=d[n[u]];d&&delete d[n[h]],(e=g.setValue(A.clone(a),n,e))===undefined&&(o=!1)}o&&(!this._fireAttrChange||l?this._setAttrVal(t,s,r,e,i,c):this._fireAttrChange(t,s,r,e,i,c))}return this},_addOutOfOrder:function(t,e){var i={};i[t]=e,delete this._tCfgs[t],this._addAttrs(i,this._tVals)},_getAttr:function(t){var e,i=t,a=this._tCfgs;return-1!==t.indexOf(y)&&(t=(e=t.split(y)).shift()),a&&a[t]&&this._addOutOfOrder(t,a[t]),(a=this._state.data[t]||{}).lazy&&(a=a.lazy,this._addLazyAttr(t,a)),t=this._getStateVal(t,a),t=(a=(a=a.getter)&&!a.call?this[a]:a)?a.call(this,t,i):t,e?g.getValue(t,e):t},_getStateVal:function(t,e){var i=this._stateProxy;return e=e||this._state.getAll(t)||{},i&&t in i&&!e._bypassProxy?i[t]:e.value},_setStateVal:function(t,e){var i=this._stateProxy;i&&t in i&&!this._state.get(t,a)?i[t]=e:this._state.add(t,l,e)},_setAttrVal:function(t,e,i,a,s,n){var r,l=!0,n=n||this._state.data[t]||{},d=n.validator,h=n.setter,u=n.initializing,o=this._getStateVal(t,n),f=e||t;return(d=d&&(d.call?d:this[d]))&&!(r=d.call(this,a,f,s))&&u&&(a=n.defaultValue,r=!0),!d||r?((h=h&&(h.call?h:this[h]))&&((d=h.call(this,a,f,s))===_?u?a=n.defaultValue:l=!1:d!==undefined&&(a=d)),l&&(e||a!==o||c.isObject(a)?(v in n||(n.initValue=a),this._setStateVal(t,a)):l=!1)):l=!1,l},setAttrs:function(t,e){return this._setAttrs(t,e)},_setAttrs:function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.set(i,t[i],e);return this},getAttrs:function(t){return this._getAttrs(t)},_getAttrs:function(t){for(var e,i={},a=!0===t,s=0,n=(t=t&&!a?t:g.keys(this._state.data)).length;s<n;s++)e=t[s],a&&this._getStateVal(e)==this._state.get(e,v)||(i[e]=this.get(e));return i},addAttrs:function(t,e,i){return t&&(this._tCfgs=t,this._tVals=e?this._normAttrVals(e):null,this._addAttrs(t,this._tVals,i),this._tCfgs=this._tVals=null),this},_addAttrs:function(t,e,i){var a,s,n,r=this._tCfgs,l=this._tVals;for(a in t)t.hasOwnProperty(a)&&((s=t[a]).defaultValue=s.value,(n=this._getAttrInitVal(a,s,l))!==undefined&&(s.value=n),r[a]&&(r[a]=undefined),this.addAttr(a,s,i))},_protectAttrs:e.protectAttrs=function(t){if(t)for(var e in t=A.merge(t))t.hasOwnProperty(e)&&(t[e]=A.merge(t[e]));return t},_normAttrVals:function(t){var e,i,a,s,n;if(!t)return null;for(n in e={},t)t.hasOwnProperty(n)&&(-1!==n.indexOf(y)?(s=(i=i||{})[s=(a=n.split(y)).shift()]=i[s]||[])[s.length]={path:a,value:t[n]}:e[n]=t[n]);return{simple:e,complex:i}},_getAttrInitVal:function(t,e,i){var a,s,n,r,l,d,h,u=e.value,o=e.valueFn,f=!1,e=e.readOnly;if(!e&&i&&(a=i.simple)&&a.hasOwnProperty(t)&&(u=a[t],f=!0),o&&!f&&(o=o.call?o:this[o])&&(u=o.call(this,t)),!e&&i&&(s=i.complex)&&s.hasOwnProperty(t)&&u!==undefined&&null!==u)for(n=0,r=(h=s[t]).length;n<r;++n)l=h[n].path,d=h[n].value,g.setValue(u,l,d);return u},_initAttrs:function(t,e,i){t=t||this.constructor.ATTRS;var a=A.Base,s=A.BaseCore,a=a&&A.instanceOf(this,a),s=!a&&s&&A.instanceOf(this,s);!t||a||s||this.addAttrs(A.AttributeCore.protectAttrs(t),e,i)}},A.AttributeCore=e},"@VERSION@",{requires:["oop"]});